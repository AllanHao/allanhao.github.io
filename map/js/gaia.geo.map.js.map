{"version":3,"sources":["webpack:///webpack/bootstrap 5ff4dc2950fafbbd514b","webpack:///external \"ol\"","webpack:///./src/geo.map.js","webpack:///./src/gaia/index.js","webpack:///./src/ol/source/amap.js","webpack:///./src/ol/source/tianditu.js","webpack:///./src/others/transform.js","webpack:///(webpack)/buildin/module.js"],"names":["__webpack_require__","moduleId","installedModules","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","ol","GeoMap","id","mapType","onConnect","_connected","console","log","client","subscribe","el","innerText","_failedCount","document","getElementById","_classCallCheck","this","Paho","MQTT","Client","connect","onSuccess","onConnectionLost","responseObject","errorCode","errorMessage","onMessageArrived","message","payloadString","view","View","center","zoom","minZoom","maxZoom","map","Map","target","controls","control","defaults","attributionOptions","collapsible","rotate","on","event","coordinate","baseLayer","layer","Tile","title","source","OSM","addLayer","XYZ","tileUrlFunction","tileCoord","z","x","y","Tianditu","url","matrixSet","projection","labelLayer","BingMaps","key","imagerySet","geolocation","Geolocation","tracking","getProjection","trackStyle","style","Style","stroke","Stroke","color","width","lineCap","trackFeature","Feature","geometry","geom","LineString","trackLayer","Vector","features","positionFeature","speed","heading","setStyle","image","Circle","radius","fill","Fill","getAccuracy","toFixed","_heading","getHeading","_headTxt","_oSpeed","getSpeed","_speed","error","info","innerHTML","display","accuracyFeature","coordinates","getPosition","proj","transform","_res","eviltransform","wgs2gcj","lng","lat","getView","setCenter","setGeometry","Point","set","getGeometry","appendCoordinate","_content","clientId","send","JSON","stringify","date","Date","month","getMonth","strDate","getDate","getFullYear","getHours","getMinutes","getSeconds","getNowFormatDate","s4","Math","floor","random","toString","substring","gaia","window","interaction","events","Array","addFunction","fn","_add","length","idx","replace","push","statistic","j","total","mean","diffSqredArr","parseFloat","_min","_max","pow","min","max","avg","std","sqrt","reduce","firstEl","nextEl","format","fmt","M+","d+","h+","m+","s+","q+","S","getMilliseconds","test","RegExp","$1","substr","k","Constant","type","featureInvalidInterval","analysisUrl","analysisLastDays","analysisStartTime","gis2wifiFloor","getTimeNowStr","dt","setFullYear","setMonth","setDate","getDateNowStr","getDateNow","getYestodayDateStr","getYestodayTimeStr","getDatetimeStr","getDateStr","AMap","options","undefined","attributions","option","_olDebug2","default","ATTRIBUTION","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","crossOrigin","cacheSize","wrapX","Attribution","html","opt_options","urls","version","dimensions","tileGrid","getTileGrid","opaque","reprojectionErrorThreshold","tileLoadFunction","WMTS","default4326TileGrid","default3857TileGrid","tdt_WGS84_resolutions","matrixIds","tilegrid","extent","resolutions","origin","tdt_Mercator_resolutions","outOfChina","delta","ee","xy","absX","abs","xPi","PI","yPi","sin","radLat","magic","sqrtMagic","earthR","cos","wgsLat","wgsLng","gcj2wgs","gcjLat","gcjLng","gcj2bd","theta","atan2","bdLng","bd2gcj","bdLat","gcj2wgs_exact","newLat","newLng","oldLat","oldLng","tmp","distance","latA","lngA","latB","lngB","pi180","arcLatA","arcLatB","acos","wgs2bd","gcj","bd2wgs","webpackPolyfill","deprecate","paths","children"],"mappings":"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","file":"gaia.geo.map.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5ff4dc2950fafbbd514b","module.exports = ol;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ol\"\n// module id = 0\n// module chunks = 0","import './gaia/index'\r\nimport './ol/source/amap';\r\nimport './ol/source/tianditu';\r\nimport './others/transform';\r\n\r\nexport default class GeoMap {\r\n    constructor(id, mapType) {\r\n        //初始化mqtt客户端\r\n        let _connected = false;\r\n        let _failedCount = 0;\r\n        const _clientId = '_clientId';//this.guid();\r\n        //  const client = new Paho.MQTT.Client(\"223.223.198.162\", 8083, _clientId);//建立客户端实例  \r\n        const client = new Paho.MQTT.Client(\"59.110.63.140\", 8083, '/mqtt', _clientId);//建立客户端实例  \r\n        client.connect({ onSuccess: onConnect });//连接服务器并注册连接成功处理事件  \r\n        function onConnect() {\r\n            _connected = true;\r\n            console.log(\"onConnected\");\r\n            client.subscribe(\"/geolocation\");//订阅主题  \r\n            el('info').innerText = '连接成功。';\r\n            _failedCount = 0;\r\n        }\r\n        client.onConnectionLost = onConnectionLost;//注册连接断开处理事件  \r\n        client.onMessageArrived = onMessageArrived;//注册消息接收处理事件  \r\n        function onConnectionLost(responseObject) {\r\n            if (responseObject.errorCode !== 0) {\r\n                console.log(\"onConnectionLost:\" + responseObject.errorMessage);\r\n                console.log(\"连接已断开\");\r\n                el('info').innerText = '连接已断开。';\r\n                if (_failedCount < 3) {\r\n                    _failedCount++;\r\n                    client.connect({ onSuccess: onConnect });\r\n                }\r\n            }\r\n        }\r\n        function onMessageArrived(message) {\r\n            console.log(\"收到消息:\" + message.payloadString);\r\n            // alert(\"收到消息:\" + message.payloadString);\r\n        }\r\n\r\n\r\n        const view = new ol.View({\r\n            center: [0, 0],\r\n            zoom: 10,\r\n            minZoom: 1,\r\n            maxZoom: 18\r\n            // projection: 'EPSG:4326'\r\n        });\r\n\r\n        const map = new ol.Map({\r\n            target: id,\r\n            controls: ol.control.defaults({\r\n                attributionOptions: {\r\n                    collapsible: false\r\n                },\r\n                rotate: false\r\n            }),\r\n            view: view\r\n        });\r\n\r\n        map.on('click', function (event) {\r\n            console.log(event.coordinate);\r\n        })\r\n\r\n        let baseLayer;\r\n        switch (mapType) {\r\n            case 1:\r\n                baseLayer = new ol.layer.Tile({\r\n                    title: 'osm',\r\n                    source: new ol.source.OSM()\r\n                });\r\n\r\n\r\n                map.addLayer(baseLayer);\r\n                break;\r\n            case 2:\r\n                // baseLayer = new ol.layer.Tile({\r\n                //     title: 'amap',\r\n                //     source: new ol.source.AMap({\r\n                //         // mapType: \"sat\"\r\n                //     })\r\n                // });\r\n\r\n                baseLayer = new ol.layer.Tile({\r\n                    source: new ol.source.XYZ({\r\n                        tileUrlFunction: function (tileCoord) {\r\n                            var z = tileCoord[0];\r\n                            var x = tileCoord[1];\r\n                            var y = tileCoord[2];\r\n                            y = -y - 1;\r\n                            return \"http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x=\" + x + \"&y=\" + y + \"&z=\" + z;\r\n                        }\r\n                    })\r\n                });\r\n                map.addLayer(baseLayer);\r\n                break;\r\n            case 3:\r\n                baseLayer = new ol.layer.Tile({\r\n                    title: \"tianLayer1\",\r\n                    source: new ol.source.Tianditu({\r\n                        url: \"http://t2.tianditu.com/vec_c/wmts\",\r\n                        matrixSet: 'c',\r\n                        layer: 'vec',\r\n                        projection: \"EPSG:4326\"\r\n                    })\r\n                });\r\n                const labelLayer = new ol.layer.Tile({\r\n                    title: \"tianLayer2\",\r\n                    source: new ol.source.Tianditu({\r\n                        url: \" http://t2.tianditu.com/cva_c/wmts\",\r\n                        matrixSet: 'c',\r\n                        layer: 'cva',\r\n                        projection: \"EPSG:4326\"\r\n                    })\r\n                });\r\n                map.addLayer(baseLayer);\r\n                map.addLayer(labelLayer);\r\n                break;\r\n            case 4:\r\n                baseLayer = new ol.layer.Tile({\r\n                    title: 'amap',\r\n                    source: new ol.source.BingMaps({\r\n                        key: 'As1HiMj1PvLPlqc_gtM7AqZfBL8ZL3VrjaS3zIb22Uvb9WKhuJObROC-qUpa81U5',\r\n                        imagerySet: 'Road'\r\n                    })\r\n                });\r\n                map.addLayer(baseLayer);\r\n                break;\r\n            default:\r\n                baseLayer = new ol.layer.Tile({\r\n                    title: 'amap',\r\n                    source: new ol.source.OSM()\r\n                });\r\n                map.addLayer(baseLayer);\r\n                break;\r\n        }\r\n\r\n        const geolocation = new ol.Geolocation({\r\n            tracking: true,\r\n            projection: view.getProjection()\r\n        });\r\n\r\n\r\n        // create a style to display our position history (track)\r\n        var trackStyle = new ol.style.Style({\r\n            stroke: new ol.style.Stroke({\r\n                color: 'rgba(77,167,99,0.8)',\r\n                width: 5,\r\n                lineCap: 'round'\r\n            })\r\n        });\r\n        // use a single feature with a linestring geometry to display our track\r\n        var trackFeature = new ol.Feature({\r\n            geometry: new ol.geom.LineString([])\r\n        });\r\n        // we'll need a vector layer to render it\r\n        var trackLayer = new ol.layer.Vector({\r\n            source: new ol.source.Vector({\r\n                features: [trackFeature]\r\n            }),\r\n            style: trackStyle\r\n        });\r\n        map.addLayer(trackLayer);\r\n\r\n        const positionFeature = new ol.Feature({ speed: '', heading: '' });\r\n        positionFeature.setStyle(new ol.style.Style({\r\n            image: new ol.style.Circle({\r\n                radius: 6,\r\n                fill: new ol.style.Fill({\r\n                    color: '#3399CC'\r\n                }),\r\n                stroke: new ol.style.Stroke({\r\n                    color: '#fff',\r\n                    width: 2\r\n                })\r\n            })\r\n        }));\r\n\r\n        function el(id) {\r\n            return document.getElementById(id);\r\n        }\r\n\r\n        // update the HTML page when the position changes.\r\n        geolocation.on('change', function () {\r\n            el('accuracy').innerText = geolocation.getAccuracy().toFixed(2) + ' [m]';\r\n\r\n            const _oHeading = geolocation.getHeading() ? geolocation.getHeading() : 0;\r\n            const _heading = _oHeading * 57.3;// + ' [°]';\r\n            let _headTxt = '';\r\n            if ((_heading >= 0 && _heading <= 15) || _heading > 345) {\r\n                _headTxt = '北'\r\n            }\r\n            else if (_heading > 15 && _heading <= 75) {\r\n                _headTxt = '东北'\r\n            }\r\n            else if (_heading > 75 && _heading <= 105) {\r\n                _headTxt = '东'\r\n            }\r\n            else if (_heading > 105 && _heading <= 165) {\r\n                _headTxt = '东南'\r\n            }\r\n            else if (_heading > 165 && _heading <= 195) {\r\n                _headTxt = '南'\r\n            }\r\n            else if (_heading > 195 && _heading <= 255) {\r\n                _headTxt = '西南'\r\n            }\r\n            else if (_heading > 255 && _heading <= 285) {\r\n                _headTxt = '西'\r\n            }\r\n            else if (_heading > 285 && _heading <= 345) {\r\n                _headTxt = '西北'\r\n            }\r\n\r\n            el('heading').innerText = _headTxt;\r\n            const _oSpeed = geolocation.getSpeed() ? geolocation.getSpeed() : 0;\r\n            const _speed = _oSpeed <= 5 ? _oSpeed.toFixed(2) + ' [m/s]' : (_oSpeed * 3.6).toFixed(2) + ' [km/h]'\r\n            el('speed').innerText = _speed;\r\n\r\n            // const coordinates = geolocation.getPosition();\r\n            // if (_connected) {\r\n            //     const _content = {\r\n            //         clientId: _clientId, coordinate: coordinates, speed: _speed, heading: _heading\r\n            //     }\r\n            //     client.send('/geolocation', JSON.stringify(_content))\r\n            // }\r\n        });\r\n\r\n        // handle geolocation error.\r\n        geolocation.on('error', function (error) {\r\n            const info = document.getElementById('info');\r\n            info.innerHTML = error.message;\r\n            info.style.display = '';\r\n        });\r\n\r\n        const accuracyFeature = new ol.Feature();\r\n        // geolocation.on('change:accuracyGeometry', function () {\r\n        //     accuracyFeature.setGeometry(geolocation.getAccuracyGeometry());\r\n        //     console.log(geolocation.getAccuracyGeometry().getType());\r\n        // });\r\n\r\n\r\n\r\n        geolocation.on('change:position', function () {\r\n            let coordinates = geolocation.getPosition();\r\n            //console.log('原始定位坐标：' + coordinates);\r\n            //  coordinates = [coordinates[0],0-coordinates[1]]\r\n            //转换坐标\r\n            if (mapType === 2) {\r\n                coordinates = ol.proj.transform(coordinates, 'EPSG:3857', 'EPSG:4326');\r\n                const _res = eviltransform.wgs2gcj(coordinates[1], coordinates[0]);\r\n                coordinates = ol.proj.transform([_res.lng, _res.lat], 'EPSG:4326', 'EPSG:3857');\r\n            }\r\n\r\n            // console.log('转换后高德定位坐标：');\r\n            // console.log(_res);\r\n\r\n            // console.log('转换后墨卡托定位坐标：');\r\n            // console.log(coordinates);\r\n            // AMap.convertFrom(coordinates, 'gps', function (status, result) {\r\n            //     if (result.info === 'ok') {\r\n            //         console.log(coordinates);\r\n\r\n            //         coordinates = [result.locations[0].lng, result.locations[0].lat]; // Array.<LngLat>\r\n            //         console.log(coordinates);\r\n            //         // coordinates = [_res.lat, _res.lng];\r\n\r\n            //         map.getView().setCenter(coordinates);\r\n            //         positionFeature.setGeometry(coordinates ?\r\n            //             new ol.geom.Point(coordinates) : null);\r\n            //     }\r\n            // });\r\n\r\n            map.getView().setCenter(coordinates);\r\n            positionFeature.setGeometry(coordinates ?\r\n                new ol.geom.Point(coordinates) : null);\r\n\r\n            positionFeature.set('speed', geolocation.getSpeed() + ' [m/s]');\r\n            positionFeature.set('heading', geolocation.getHeading() + ' [rad]');\r\n            // console.log(coordinates);\r\n            //console.log(geolocation.getProjection());\r\n            trackFeature.getGeometry().appendCoordinate(coordinates);\r\n\r\n            const _oHeading = geolocation.getHeading() ? geolocation.getHeading() : 0;\r\n            const _heading = _oHeading * 57.3 + ' [°]';\r\n            const _oSpeed = geolocation.getSpeed() ? geolocation.getSpeed() : 0;\r\n            const _speed = _oSpeed <= 5 ? _oSpeed.toFixed(2) + ' [m/s]' : (_oSpeed * 3.6).toFixed(2) + ' [km/h]'\r\n            if (_connected) {\r\n                const _content = {\r\n                    clientId: _clientId, coordinate: coordinates, speed: _speed, heading: _heading\r\n                }\r\n                client.send('/geolocation', JSON.stringify(_content))\r\n                el('info').innerText = getNowFormatDate() + ' 上报位置成功。'\r\n            }\r\n        });\r\n\r\n        new ol.layer.Vector({\r\n            map: map,\r\n            source: new ol.source.Vector({\r\n                features: [accuracyFeature, positionFeature]\r\n            })\r\n        });\r\n\r\n\r\n        function getNowFormatDate() {\r\n            var date = new Date();\r\n            var seperator1 = \"-\";\r\n            var seperator2 = \":\";\r\n            var month = date.getMonth() + 1;\r\n            var strDate = date.getDate();\r\n            if (month >= 1 && month <= 9) {\r\n                month = \"0\" + month;\r\n            }\r\n            if (strDate >= 0 && strDate <= 9) {\r\n                strDate = \"0\" + strDate;\r\n            }\r\n            var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate\r\n                + \" \" + date.getHours() + seperator2 + date.getMinutes()\r\n                + seperator2 + date.getSeconds();\r\n            return currentdate;\r\n        }\r\n    }\r\n\r\n    guid() {\r\n        function s4() {\r\n            return Math.floor((1 + Math.random()) * 0x10000)\r\n                .toString(16)\r\n                .substring(1);\r\n        }\r\n        return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n    }\r\n\r\n}\r\ngaia.GeoMap = GeoMap;\n\n\n// WEBPACK FOOTER //\n// ./src/geo.map.js","//换对象\r\nfunction delegate(obj, callback) {\r\n\treturn function () {\r\n\t\tif (obj) {\r\n\t\t\tcallback.apply(obj, arguments);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @namespace gaia\r\n * @api\r\n */\r\nvar gaia = window.gaia = window.gaia || {};\r\nmodule.exports = gaia;\r\n/**\r\n * @namespace gaia.layer\r\n * @api\r\n */\r\ngaia.layer = gaia.layer || {};\r\n/**\r\n * @namespace gaia.interaction\r\n * @api\r\n */\r\ngaia.interaction = gaia.interaction || {};\r\n/**\r\n * @namespace gaia.events\r\n * @api\r\n */\r\ngaia.events = gaia.events || {};\r\nArray.prototype.addFunction = function (fn) {\r\n\tvar _add = true\r\n\tif (this.length > 0) {\r\n\t\tfor (let idx = 0; idx < this.length; idx++) {\r\n\t\t\tconst fn1 = this[idx];\r\n\t\t\tif (fn1.toString().replace(fn, '$1') === fn.toString().replace(fn, '$1')) {\r\n\t\t\t\t_add = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (_add) {\r\n\t\tthis.push(fn);\r\n\t}\r\n}\r\n\r\n/**\r\n * 数组分析\r\n */\r\nArray.prototype.statistic = function () {\r\n\tif (this.length <= 0) {\r\n\t\treturn null;\r\n\t}\r\n\tvar i, j, total = 0,\r\n\t\tmean = 0,\r\n\t\tdiffSqredArr = [];\r\n\tfor (i = 0; i < this.length; i += 1) {\r\n\t\ttotal += parseFloat(this[i]);\r\n\t}\r\n\tmean = total / this.length;\r\n\tvar _min = parseFloat(this[0]);\r\n\tvar _max = parseFloat(this[0]);\r\n\tfor (j = 0; j < this.length; j += 1) {\r\n\t\tif (parseFloat(this[j]) < _min) {\r\n\t\t\t_min = parseFloat(this[j]);\r\n\t\t}\r\n\t\tif (parseFloat(this[j]) > _max) {\r\n\t\t\t_max = parseFloat(this[j]);\r\n\t\t}\r\n\t\tdiffSqredArr.push(Math.pow((parseFloat(this[j]) - mean), 2));\r\n\t}\r\n\tvar std = Math.sqrt(diffSqredArr.reduce(function (firstEl, nextEl) {\r\n\t\treturn firstEl + nextEl;\r\n\t}) / this.length);\r\n\treturn {\r\n\t\tmin: _min,\r\n\t\tmax: _max,\r\n\t\tavg: mean,\r\n\t\tstd: std\r\n\t};\r\n};\r\n\r\n/**\r\n *对Date的扩展，将 Date 转化为指定格式的String\r\n *月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符，\r\n *年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)\r\n *例子：\r\n *(new Date()).Format(\"yyyy-MM-dd hh:mm:ss.S\") ==> 2006-07-02 08:09:04.423\r\n *(new Date()).Format(\"yyyy-M-d h:m:s.S\")      ==> 2006-7-2 8:9:4.18\r\n */\r\nDate.prototype.format = function (fmt) {\r\n\tvar o = {\r\n\t\t\"M+\": this.getMonth() + 1, //月份\r\n\t\t\"d+\": this.getDate(), //日\r\n\t\t\"h+\": this.getHours(), //小时\r\n\t\t\"m+\": this.getMinutes(), //分\r\n\t\t\"s+\": this.getSeconds(), //秒\r\n\t\t\"q+\": Math.floor((this.getMonth() + 3) / 3), //季度\r\n\t\t\"S\": this.getMilliseconds() //毫秒\r\n\t};\r\n\tif (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n\tfor (var k in o)\r\n\t\tif (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n\treturn fmt;\r\n}\r\n\r\n/**\r\n * @class gaia.Constant \r\n * @desc 定义一些常量\r\n * @api\r\n */\r\ngaia.Constant = {\r\n\t/**\r\n\t * @description 类型（demo：1，product：2）\r\n\t * @member {int} gaia.Constant.type\r\n\t * @static\r\n\t * @api\r\n\t */\r\n\ttype: 1,\r\n\t/**\r\n\t * @description 校验feature停留失效间隔时间，单位秒\r\n\t * @member {int} gaia.Constant.featureInvalidInterval\r\n\t * @static\r\n\t * @api\r\n\t */\r\n\tfeatureInvalidInterval: 60,\r\n\r\n\t/**\r\n\t * @description 调用数据分析呈现接口的url，如：\"http://192.168.1.118:9800\"\"http://101.201.145.167:9800\"\r\n\t * @member {string} gaia.Constant.analysisUrl\r\n\t * @api\r\n\t */\r\n\tanalysisUrl: \"https://dataapi.smartmall.gaiais.com\",\r\n\r\n\t/**\r\n\t * @description 历史分析的时间段\r\n\t * @member {int} gaia.Constant.analysisLastDays\r\n\t * @static\r\n\t * @api\r\n\t */\r\n\tanalysisLastDays: 15,\r\n\r\n\t/**\r\n\t * @description 调用数据分析参数的开始时间，如：'8:00:00'\r\n\t * @member {string} gaia.Constant.analysisStartTime\r\n\t * @api\r\n\t */\r\n\tanalysisStartTime: '8:00:00',\r\n\r\n\t/**\r\n\t * @description wifi楼层与giscenter楼层对应关系,\r\n\t * @member {object} gaia.Constant.wifiFloor\r\n\t * @api\r\n\t */\r\n\tgis2wifiFloor: {},\r\n\t/**\r\n\t * @description 获取当前时间的字符串格式\r\n\t * @method gaia.Constant.getTimeNowStr\r\n\t * @returns {string} strDate 当前时间的字符串，如:'2017-11-16 17:56:38'\r\n\t * @api\r\n\t */\r\n\tgetTimeNowStr: function () {\r\n\t\tconst dt = new Date();\r\n\t\tif (gaia.Constant.type === 1) {\r\n\t\t\tdt.setFullYear(2018);\r\n\t\t\tdt.setMonth(4);\r\n\t\t\tdt.setDate(15);\r\n\t\t}\r\n\t\treturn dt.format(\"yyyy-MM-dd hh:mm:ss\");\r\n\t\t//return dt.getFullYear() + \"-\" + ((dt.getMonth() + 1) < 10 ? \"0\" + (dt.getMonth() + 1) : (dt.getMonth() + 1)) + \"-\" + (dt.getDate() < 10 ? \"0\" + dt.getDate() : dt.getDate()) + \" \" + (dt.getHours() < 10 ? \"0\" + dt.getHours() : dt.getHours()) + \":\" + (dt.getMinutes() < 10 ? \"0\" + dt.getMinutes() : dt.getMinutes()) + \":\" + (dt.getSeconds() < 10 ? \"0\" + dt.getSeconds() : dt.getSeconds());\r\n\t},\r\n\r\n\t/**\r\n\t * @description 获取当前日期的字符串格式\r\n\t * @method gaia.Constant.getDateNowStr\r\n\t * @returns {String} strDate 当前时间的字符串，如:'2017-11-16'\r\n\t * @api\r\n\t */\r\n\tgetDateNowStr: function () {\r\n\t\tconst dt = new Date();\r\n\t\tif (gaia.Constant.type === 1) {\r\n\t\t\tdt.setFullYear(2018);\r\n\t\t\tdt.setMonth(4);\r\n\t\t\tdt.setDate(15);\r\n\t\t}\r\n\t\treturn dt.format(\"yyyy-MM-dd\")\r\n\t},\r\n\r\n\t/**\r\n\t* @description 获取当前日期\r\n\t* @method gaia.Constant.getDateNow\r\n\t* @returns {Date} Date 当前时间\r\n\t* @api\r\n\t*/\r\n\tgetDateNow: function () {\r\n\t\tconst dt = new Date();\r\n\t\tif (gaia.Constant.type === 1) {\r\n\t\t\tdt.setFullYear(2018);\r\n\t\t\tdt.setMonth(4);\r\n\t\t\tdt.setDate(15);\r\n\t\t}\r\n\t\treturn dt;\r\n\t},\r\n\r\n\t/**\r\n\t * 获取昨天日期的字符串格式\r\n\t * @method gaia.Constant.getYestodayStr\r\n\t * @returns {String} strDate 昨天日期的字符串，如：'2017-11-16'\r\n\t * @api\r\n\t */\r\n\tgetYestodayDateStr: function () {\r\n\t\tconst dt = new Date();\r\n\t\tif (gaia.Constant.type === 1) {\r\n\t\t\tdt.setFullYear(2018);\r\n\t\t\tdt.setMonth(4);\r\n\t\t\tdt.setDate(15);\r\n\t\t}\r\n\t\tdt.setDate(dt.getDate() - 1);\r\n\t\treturn dt.format(\"yyyy-MM-dd\");\r\n\t},\r\n\r\n\t/**\r\n    * @description 获取昨天时间的字符串格式\r\n    * @method gaia.Constant.getYestodayTimeStr\r\n    * @returns {string} strDate 昨天时间的字符串，如:'2017-11-16 17:56:38'\r\n    * @api\r\n    */\r\n\tgetYestodayTimeStr: function () {\r\n\t\tconst dt = new Date();\r\n\t\tif (gaia.Constant.type === 1) {\r\n\t\t\tdt.setFullYear(2018);\r\n\t\t\tdt.setMonth(4);\r\n\t\t\tdt.setDate(15);\r\n\t\t}\r\n\t\tdt.setDate(dt.getDate() - 1);\r\n\t\treturn dt.format(\"yyyy-MM-dd hh:mm:ss\");\r\n\t\t//return dt.getFullYear() + \"-\" + ((dt.getMonth() + 1) < 10 ? \"0\" + (dt.getMonth() + 1) : (dt.getMonth() + 1)) + \"-\" + (dt.getDate() < 10 ? \"0\" + dt.getDate() : dt.getDate()) + \" \" + (dt.getHours() < 10 ? \"0\" + dt.getHours() : dt.getHours()) + \":\" + (dt.getMinutes() < 10 ? \"0\" + dt.getMinutes() : dt.getMinutes()) + \":\" + (dt.getSeconds() < 10 ? \"0\" + dt.getSeconds() : dt.getSeconds());\r\n\t},\r\n\t/**\r\n\t * @description 获取传入时间的字符串格式，含时间\r\n\t * @method gaia.Constant.getDatetimeStr\r\n\t * @param {Datetime} dt 时间对象\r\n\t * @returns {String} strDate 时间的字符串，如:'2017-11-16 17:56:38'\r\n\t * @api\r\n\t */\r\n\tgetDatetimeStr: function (dt) {\r\n\t\tif (dt && dt.getFullYear) {\r\n\t\t\treturn dt.format(\"yyyy-MM-dd hh:mm:ss\");\r\n\t\t\t//\treturn dt.getFullYear() + \"-\" + (dt.getMonth() + 1) + \"-\" + dt.getDate() + \" \" + dt.getHours() + \":\" + dt.getMinutes() + \":\" + dt.getSeconds();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @description 获取传入时间的日期字符串格式\r\n\t * @method gaia.Constant.getDateStr\r\n\t * @param {Datetime} dt 时间对象\r\n\t * @returns {String} strDate 日期的字符串，如:'2017-11-16'\r\n\t * @api\r\n\t */\r\n\tgetDateStr: function (dt) {\r\n\t\tif (dt && dt.getFullYear) {\r\n\t\t\treturn dt.format(\"yyyy-MM-dd\");\r\n\t\t\t//return dt.getFullYear() + \"-\" + (dt.getMonth() + 1) + \"-\" + dt.getDate();\r\n\t\t}\r\n\t}\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/gaia/index.js","import ol from 'openlayers/dist/ol-debug';\r\n\r\n/**\r\n * @class ol.source.AMap\r\n * @classdesc 高德图层源。\r\n * @param options - {Object} 参数。 \r\n *        attributions - {string} 版权描述信息。<br>\r\n *        cacheSize - {number} 缓冲大小。<br>\r\n *      mapType - {string} 地图类型\r\n * @extends ol.source.WMTS{@linkdoc-openlayers/ol.source.WMTS}\r\n * @api\r\n */\r\nexport default class AMap extends ol.source.XYZ {\r\n    constructor(options) {\r\n        var options = options ? options : {};\r\n        var attributions;\r\n        if (options.attributions !== undefined) {\r\n            attributions = option.attributions;\r\n        } else {\r\n            attributions = [ol.source.AMap.ATTRIBUTION];\r\n        }\r\n        var url;\r\n        if (options.mapType == \"sat\") {\r\n            url = \"http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}\";\r\n        } else {\r\n            url = \"http://webrd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}\";\r\n        }\r\n        super({\r\n            crossOrigin: 'anonymous',   //跨域\r\n            cacheSize: options.cacheSize,\r\n            projection: ol.proj.get('EPSG:3857'),\r\n            // urls:urls,\r\n            url: url,\r\n            wrapX: options.wrapX !== undefined ? options.wrapX : true\r\n        });\r\n        this.ATTRIBUTION = new ol.Attribution({\r\n            html: '&copy; <a class=\"ol-attribution-amap\" ' +\r\n                'href=\"http://ditu.amap.com/\">' +\r\n                '高德地图</a>'\r\n        });\r\n    }\r\n}\r\nol.source.AMap = AMap;\n\n\n// WEBPACK FOOTER //\n// ./src/ol/source/amap.js","import ol from 'openlayers/dist/ol-debug';\r\n\r\n/**\r\n * @class ol.source.Tianditu\r\n * @classdesc 天地图图层源。\r\n * @param opt_options - {Object} 参数。\r\n *        url - {string} 服务地址。<br>\r\n *        attributions - {string} 版权描述信息。<br>\r\n *        cacheSize - {number} 缓冲大小。<br>\r\n *        tileLoadFunction - {function} 切片加载完成后执行函数。<br>\r\n *        maxZoom - {Object} 最大缩放级别。<br>\r\n *        opaque - {boolean} 是否透明。\r\n * @extends ol.source.WMTS{@linkdoc-openlayers/ol.source.WMTS}\r\n * @api\r\n */\r\nexport default class Tianditu extends ol.source.WMTS {\r\n\tconstructor(opt_options){\r\n\t\tvar options = opt_options || {};\r\n\t\tvar attributions = options.attributions || new ol.Attribution({\r\n\t\t\thtml: \"Map Data <a href='http://www.tianditu.com' target='_blank'><img style='background-color:transparent;bottom:2px;opacity:1;' \" +\r\n            \"src='http://api.tianditu.com/img/map/logo.png' width='53px' height='22px' opacity='0'></a> with \" +\r\n            \"<span>© <a href='http://iclient.supermapol.com' target='_blank'>SuperMap iClient</a></span>\"\r\n\t\t});\r\n\r\n\t\tif (!options.url && !options.urls) {\r\n\t\t\toptions.url = \"http://t{0-7}.tianditu.com/img_w/wmts\"\r\n\t\t}\r\n\t\tsuper({\r\n\t\t\tversion: options.version || '1.0.0',\r\n\t\t\tformat: options.format || 'tiles',\r\n\t\t\tdimensions: options.dimensions || {},\r\n\t\t\tlayer: options.layer || 'img',\r\n\t\t\tmatrixSet: options.matrixSet || 'w',\r\n\t\t\ttileGrid: options.tileGrid || ol.source.Tianditu.getTileGrid(options.projection || 'EPSG:3857'),\r\n\t\t\tstyle: options.style || 'default',\r\n\t\t\tattributions: attributions,\r\n\t\t\tcacheSize: options.cacheSize,\r\n\t\t\tcrossOrigin: options.crossOrigin,\r\n\t\t\topaque: options.opaque || true,\r\n\t\t\tmaxZoom: options.maxZoom || 19,\r\n\t\t\treprojectionErrorThreshold: options.reprojectionErrorThreshold,\r\n\t\t\ttileLoadFunction: options.tileLoadFunction,\r\n\t\t\turl: options.url,\r\n\t\t\turls: options.urls,\r\n\t\t\tprojection: options.projection || 'EPSG:3857',\r\n\t\t\twrapX: options.wrapX\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n     * @function ol.source.Tianditu.getTileGrid\r\n     * @description 获取网格瓦片\r\n     * @param projection - {Object} 投影参考对象\r\n     * @return {ol.tilegrid.WMTS}\r\n     * @api\r\n     */\r\n\tstatic getTileGrid(projection) {\r\n\t\tif (projection === \"EPSG:4326\" || projection === \"EPSG:4490\") {\r\n\t\t\treturn ol.source.Tianditu.default4326TileGrid();\r\n\t\t}\r\n\t\treturn ol.source.Tianditu.default3857TileGrid();\r\n\t}\r\n\r\n\t/**\r\n     * @function ol.source.Tianditu.default4326TileGrid\r\n     * @description 获取默认4326网格瓦片\r\n     * @return {ol.tilegrid.WMTS}\r\n     * @api\r\n     */\r\n\tstatic default4326TileGrid() {\r\n\t\tvar tdt_WGS84_resolutions = [];\r\n\t\tvar matrixIds = [];\r\n\t\tfor (var i = 0; i < 18; i++) {\r\n\t\t\ttdt_WGS84_resolutions.push(0.703125 / (Math.pow(2, i)));\r\n\t\t\tmatrixIds.push(i + 1);\r\n\t\t}\r\n\t\tvar tileGird = new ol.tilegrid.WMTS({\r\n\t\t\textent: [-180, -90, 180, 90],\r\n\t\t\tresolutions: tdt_WGS84_resolutions,\r\n\t\t\torigin: [-180, 90],\r\n\t\t\tmatrixIds: matrixIds,\r\n\t\t\tminZoom: 1\r\n\t\t});\r\n\t\treturn tileGird;\r\n\t}\r\n\r\n\t/**\r\n     * @function ol.source.Tianditu.default3857TileGrid\r\n     * @description 获取默认3857网格瓦片\r\n     * @return {ol.tilegrid.WMTS}\r\n     * @api\r\n     */\r\n\tstatic default3857TileGrid() {\r\n\t\tvar tdt_Mercator_resolutions = [];\r\n\t\tvar matrixIds = [];\r\n\t\tfor (var i = 0; i < 18; i++) {\r\n\t\t\ttdt_Mercator_resolutions.push(78271.5169640203125 / (Math.pow(2, i)));\r\n\t\t\tmatrixIds.push(i + 1);\r\n\t\t}\r\n\t\tvar tileGird = new ol.tilegrid.WMTS({\r\n\t\t\textent: [-20037508.3427892, -20037508.3427892, 20037508.3427892, 20037508.3427892],\r\n\t\t\tresolutions: tdt_Mercator_resolutions,\r\n\t\t\tmatrixIds: matrixIds,\r\n\t\t\torigin: [-20037508.3427892, 20037508.3427892],\r\n\t\t\tminZoom: 1,\r\n\t\t});\r\n\t\treturn tileGird;\r\n\t}\r\n}\r\nol.source.Tianditu = Tianditu;\n\n\n// WEBPACK FOOTER //\n// ./src/ol/source/tianditu.js","\"use strict\";\r\n\r\nvar exports;\r\nif (typeof module === \"object\" && exports) {\r\n\texports = module.exports;\r\n} else if (typeof window !== \"undefined\") {\r\n\texports = window[\"eviltransform\"] = {};\r\n}\r\n\r\nvar earthR = 6378137.0;\r\n\r\nfunction outOfChina(lat, lng) {\r\n\tif ((lng < 72.004) || (lng > 137.8347)) {\r\n\t\treturn true;\r\n\t}\r\n\tif ((lat < 0.8293) || (lat > 55.8271)) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction transform(x, y) {\r\n\tvar xy = x * y;\r\n\tvar absX = Math.sqrt(Math.abs(x));\r\n\tvar xPi = x * Math.PI;\r\n\tvar yPi = y * Math.PI;\r\n\tvar d = 20.0*Math.sin(6.0*xPi) + 20.0*Math.sin(2.0*xPi);\r\n\r\n\tvar lat = d;\r\n\tvar lng = d;\r\n\r\n\tlat += 20.0*Math.sin(yPi) + 40.0*Math.sin(yPi/3.0);\r\n\tlng += 20.0*Math.sin(xPi) + 40.0*Math.sin(xPi/3.0);\r\n\r\n\tlat += 160.0*Math.sin(yPi/12.0) + 320*Math.sin(yPi/30.0);\r\n\tlng += 150.0*Math.sin(xPi/12.0) + 300.0*Math.sin(xPi/30.0);\r\n\r\n\tlat *= 2.0 / 3.0;\r\n\tlng *= 2.0 / 3.0;\r\n\r\n\tlat += -100.0 + 2.0*x + 3.0*y + 0.2*y*y + 0.1*xy + 0.2*absX;\r\n\tlng += 300.0 + x + 2.0*y + 0.1*x*x + 0.1*xy + 0.1*absX;\r\n\r\n\treturn {lat: lat, lng: lng}\r\n}\r\n\r\nfunction delta(lat, lng) {\r\n\tvar ee = 0.00669342162296594323;\r\n\tvar d = transform(lng-105.0, lat-35.0);\r\n\tvar radLat = lat / 180.0 * Math.PI;\r\n\tvar magic = Math.sin(radLat);\r\n\tmagic = 1 - ee*magic*magic;\r\n\tvar sqrtMagic = Math.sqrt(magic);\r\n\td.lat = (d.lat * 180.0) / ((earthR * (1 - ee)) / (magic * sqrtMagic) * Math.PI);\r\n\td.lng = (d.lng * 180.0) / (earthR / sqrtMagic * Math.cos(radLat) * Math.PI);\r\n\treturn d;\r\n}\r\n\r\nfunction wgs2gcj(wgsLat, wgsLng) {\r\n\tif (outOfChina(wgsLat, wgsLng)) {\r\n\t\treturn {lat: wgsLat, lng: wgsLng};\r\n\t}\r\n\tvar d = delta(wgsLat, wgsLng);\r\n\treturn {lat: wgsLat + d.lat, lng: wgsLng + d.lng};\r\n}\r\nexports.wgs2gcj = wgs2gcj;\r\n\r\nfunction gcj2wgs(gcjLat, gcjLng) {\r\n\tif (outOfChina(gcjLat, gcjLng)) {\r\n\t\treturn {lat: gcjLat, lng: gcjLng};\r\n\t}\r\n\tvar d = delta(gcjLat, gcjLng);\r\n\treturn {lat: gcjLat - d.lat, lng: gcjLng - d.lng};\r\n}\r\nexports.gcj2wgs = gcj2wgs;\r\n\r\nfunction gcj2wgs_exact(gcjLat, gcjLng) {\r\n\t// newCoord = oldCoord = gcjCoord\r\n\tvar newLat = gcjLat, newLng = gcjLng;\r\n\tvar oldLat = newLat, oldLng = newLng;\r\n\tvar threshold = 1e-6; // ~0.55 m equator & latitude\r\n\r\n\tfor (var i = 0; i < 30; i++) {\r\n\t\t// oldCoord = newCoord\r\n\t\toldLat = newLat;\r\n\t\toldLng = newLng;\r\n\t\t// newCoord = gcjCoord - wgs_to_gcj_delta(newCoord)\r\n\t\tvar tmp = wgs2gcj(newLat, newLng);\r\n\t\t// approx difference using gcj-space difference\r\n\t\tnewLat -= gcjLat - tmp.lat;\r\n\t\tnewLng -= gcjLng - tmp.lng;\r\n\t\t// diffchk\r\n\t\tif (Math.max(Math.abs(oldLat - newLat), Math.abs(oldLng - newLng)) < threshold) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn {lat: newLat, lng: newLng};\r\n}\r\nexports.gcj2wgs_exact = gcj2wgs_exact;\r\n\r\nfunction distance(latA, lngA, latB, lngB) {\r\n\tvar pi180 = Math.PI / 180;\r\n\tvar arcLatA = latA * pi180;\r\n \tvar arcLatB = latB * pi180;\r\n\tvar x = Math.cos(arcLatA) * Math.cos(arcLatB) * Math.cos((lngA-lngB)*pi180);\r\n\tvar y = Math.sin(arcLatA) * Math.sin(arcLatB);\r\n\tvar s = x + y;\r\n\tif (s > 1) {\r\n\t\ts = 1;\r\n\t}\r\n\tif (s < -1) {\r\n\t\ts = -1;\r\n\t}\r\n\tvar alpha = Math.acos(s);\r\n\tvar distance = alpha * earthR;\r\n\treturn distance;\r\n}\r\nexports.distance = distance;\r\n\r\nfunction gcj2bd(gcjLat, gcjLng) {\r\n\tif (outOfChina(gcjLat, gcjLng)) {\r\n\t\treturn {lat: gcjLat, lng: gcjLng};\r\n\t}\r\n\r\n\tvar x = gcjLng, y = gcjLat;\r\n\tvar z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * Math.PI);\r\n\tvar theta = Math.atan2(y, x) + 0.000003 * Math.cos(x * Math.PI);\r\n\tvar bdLng = z * Math.cos(theta) + 0.0065;\r\n\tvar bdLat = z * Math.sin(theta) + 0.006;\r\n\treturn {lat: bdLat, lng: bdLng};\r\n}\r\nexports.gcj2bd = gcj2bd;\r\n\r\nfunction bd2gcj(bdLat, bdLng) {\r\n\tif (outOfChina(bdLat, bdLng)) {\r\n\t\treturn {lat: bdLat, lng: bdLng};\r\n\t}\r\n\r\n\tvar x = bdLng - 0.0065, y = bdLat - 0.006;\r\n\tvar z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * Math.PI);\r\n\tvar theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * Math.PI);\r\n\tvar gcjLng = z * Math.cos(theta);\r\n\tvar gcjLat = z * Math.sin(theta);\r\n\treturn {lat: gcjLat, lng: gcjLng};\r\n}\r\nexports.bd2gcj = bd2gcj;\r\n\r\nfunction wgs2bd(wgsLat, wgsLng) {\r\n\tvar gcj = wgs2gcj(wgsLat, wgsLng);\r\n\treturn gcj2bd(gcj.lat, gcj.lng);\r\n}\r\nexports.wgs2bd = wgs2bd;\r\n\r\nfunction bd2wgs(bdLat, bdLng) {\r\n\tvar gcj = bd2gcj(bdLat, bdLng);\r\n\treturn gcj2wgs(gcj.lat, gcj.lng);\r\n}\r\nexports.bd2wgs = bd2wgs;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/others/transform.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}